## 写在前面
正则表达式是每一个计算机程序员都需要掌握的技术之一，一直以来由于正则表达式晦涩难懂、规则多样化等原因，都没有深入的掌握它。直到学习手写Vue源码中的模板编译时采用多个正则表达式将用户传入的HTML字符串模板解析成为一个AST抽象语法树时，才明白正则表达式的强大之处。

因此，这里专门深入学习下正则表达式，目的有3个：
1. 理解并掌握Vue2中是如何使用正则实现字符串模板解析的
2. 能够不借助于工具自己手写出大多数日常项目开发中使用的正则表达式
3. 使用正则表达式来解决一些高频的面试题，比如千分符、URL解析为对象等

## 正则表达式是什么？
1. 正则表达式，全称叫做regular expression，意思为有规律的表达式，这也是RegExp正则对象简写的由来。

2. 正则表达式是专门用来处理字符串这一种数据类型的表达式，不能使用正则表达式处理非字符串类型的数据，其实这个很好理解，因为正则表达式的诞生就是为了处理哪些复杂的字符串的，简单的字符串不需要正则，我们使用字符串方法就可以搞定。

## 正则表达式有什么用？
正则表达式在处理字符串的时候至少有以下两个用处：
### 1. 正则匹配
我们可以使用一个预设的正则表达式来验证某个参数字符串是否符合规则，这就是正则匹配。匹配成功返回true，否则返回false，而正则匹配在JS中是由正则实例的test方法提供的。
```js
// 代表匹配一个或者多个数字
let reg = /\d+/; 
console.log(reg.test('asdas455'));  // true
console.log(reg.test('sfdasfda')); // false
```

### 2. 正则捕获
前面的正则匹配只能判断出字符串是否符合正则表达式，但是不能获取到具体是哪些字符符合正则表达式。因此JS中的正则实例提供了exec方法，专门用于捕获哪些符合正则表达式的字符。

同样的，字符串实例的match方法、split方法以及replace方法的参数都是一个正则表达式，都采用了正
则捕获的思想，那就是先捕获到符合正则表达式的字符，然后对这部分字符进行操作，比如替换等。

如果一个正则表达式匹配某个字符串成功，那么exec方法会返回一个数组,数组的成员如下：
+ 索引0 值为捕获到的符合规则的字符串内容
+ groups 分组
+ index 从哪一个索引开始捕获到符合规则的字符串内容
+ input 被用于校验的原始字符串

```js
let reg = /\d+/; 
let str = "hello world 996!";
console.log(reg.exec(str));
[   
    0:'996', 
    index: 12,
    input: 'hello world 996!',
    groups: undefined
]
```

```js
let str = 'asdas455sadas687';
let reg = /\d+/;
console.log(str.match(reg));
[
	0: "455"
	groups: undefined
	index: 5
	input: "asdas455"
	length: 1
]
```

## 如何创建一个正则表达式？
和JavaScript中的大多数对象一样，创建一个正则表达式有两种方式：
1. 字面量方式
2. 构造函数方式

### 1.字面量方式
使用字面量方式创建正则表达式十分简单：被两个斜杠//包裹起来的，都是用来描述规则的元字符。这种方式创建的时候写的就是正则，反斜杠转义字符只有在字符串中才会将后面字符转义，而在正则表达式内部反斜杠/则不存在转义的效果。

1. 创建一个无修饰符的正则
```js
const reg = /\d+/;
```
2. 创建一个有模式修饰符的正则
```js
const reg = /\d+/g;
```
### 2.构造函数方式
使用构造函数RegExp创建正则的时候可以传入两个参数，第一个是元字符字符串，第二个参数是修饰符字符串。这种方式创建的时候构造函数的参数是字符串，所以要考虑反斜杠转义字符对于后面字符串的转义，所以要将转义字符再转义，即需要连着写两个反斜杠\\。

1. 创建一个无修饰符的正则
```js
let reg = new RegExp('\\d+');
```
2. 创建一个有模式修饰符的正则
```js
let reg = new RegExp('\\d+','g');
```